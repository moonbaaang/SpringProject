<%@page import="java.math.BigDecimal"%>
<%@page import="org.json.JSONArray"%>
<%@page import="org.json.JSONObject"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="jquery-3.2.1.min.js"></script>
<script>
$(document).ready(function(){

});
</script>
</head>
<body>
<h1> 얼굴 인식 서비스 </h1>

<% 
	
	String faceResult = (String)request.getAttribute("faceResult2");
	JSONObject obj = new JSONObject(faceResult);
	Object imsi = obj.get("faces"); // faces : [celebrity : {value:.. confidence:.. }, {} ]
/*	JSONArray faces = (JSONArray)imsi;
	boolean find = false;
	for(Object cele : faces){
		JSONObject celebrity = (JSONObject)((JSONObject)cele).get("celebrity");
		find = true;
		//String value = (String)celebrity.get("value");
		BigDecimal confidence = (BigDecimal)celebrity.get("confidence");
		
		out.println("닮은 연예인 이름 = " + celebrity.get("value") + ", 닮은 정도 = "
		+ Math.round(confidence.doubleValue()*100) + "%<br>");
	}
	
	String image = request.getParameter("image");
	if (find == false){
		out.println("닮은 연예인을 찾을 수 없습니다.<br>");
	}*/
%>

<img src="/faceimages/<%=image%>">
</body>
</html>