<%@page import="org.json.JSONArray"%>
<%@page import="org.json.JSONObject"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<% String result = (String)request.getAttribute("objectdetectionResult");%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="jquery-3.2.1.min.js"></script>
<script>
$(document).ready(function(){
	//$('#result').html("<h1>태그인식</h1>"); //기존 내용 삭제
	$('#result').text('<%=result%>'); // 기존 내용 삭제
	var json = JSON.parse('<%=result%>');
	$('#count').text("탐지객체수 = "+json.predictions[0].num_detections+"개");
	$('#names').text("이름들 = "+json.predictions[0].detection_names);
	$('#confidence').text("확률 = ");
	for(var i =0; i<json.predictions[0].num_detections.length(); i++){
		$('#confidence').append
		(parseInt(parseFloat(json.predictions[0].detextion_scores[i])*100)+"% ,");
	}
	
});
</script>
<script>
// window.onload = function(){
// 	var result = document.getElementById("result");
// 	var count = document.getElementById("count");
// 	var names = document.getElementById("names");
// 	var confidence = document.getElementById("confidence");
<%-- 	<% String result = (String)request.getAttribute("objectdetectionResult");%> --%>
<%-- 	result.innerHTML += '<%=result%>'; --%>
// 	// id="result"태그에 탐지된 객체 수 : xx개
// 	// id="names"태그에 객체 이름 : " ", " "
// 	// id="confidence" 태그에 99%
// 	// 자바스크립트에서 json데이터타입 인석 언어 파싱
<%-- 	var json = JSON.parse('<%=result%>'); //js 문자열 형태 - json 형태로 변환 --%>
// 	count.innerHTML = "탐지객체수 = "+json.predictions[0].num_detections+" 개";
//  	names.innerHTML = "객체이름 : "+json.predictions[0].detection_names;
//  	confidence.innerHTML = "확률 ";
//  	for(var i=0; i<json.predictions[0].detection_scores.length; i++){
//  		confidence.innerHTML +=
//  			parseInt((parseFloat)(json.predictions[0].detection_scores[i])*100)+"% ,";
//  	}
 	
	
// } //window.onload end
</script>
</head>
<body>
	<div id="result"></div>
	<div id="count"></div>
	<div id="names"></div>
	<div id="confidence"></div>
	<canvas id="imagecanvas" width=500 height=500 style="border:2px solid red"></canvas>
</body>
</html>